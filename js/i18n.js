// STDC Internationalization (i18n) System
// Supports English, Spanish, and French

const translations = {
  en: {
    // Navigation
    'nav.home': 'Home',
    'nav.what-is': 'What is Deforestation?',
    'nav.causes': 'Causes',
    'nav.effects': 'Effects',
    'nav.solutions': 'Solutions',
    'nav.help': 'How You Can Help',
    'nav.contact': 'Contact',
    
    // Common elements
    'footer.copyright': '© 2025 STDC',
    'footer.instagram': 'Instagram',
    'footer.facebook': 'Facebook',
    'footer.twitter': 'Twitter',
    'skip-link': 'Skip to main content',
    
    // Homepage
    'home.title': 'Stop Tree Devastation',
    'home.intro': 'Every year, millions of hectares of forests are lost, threatening biodiversity, disrupting ecosystems, and accelerating climate change. This website is here to guide you through a deeper understanding of deforestation—what it is, why it happens, and the wide-ranging consequences it has on the environment, wildlife, and human communities.',
    'home.intro2': 'You\'ll also discover practical ways you can get involved, raise awareness, and take meaningful action to help protect and restore our planet\'s forests for future generations.',
    'home.learn-more': 'Learn About Deforestation',
    'home.take-action': 'Take Action Now',
    'home.message.title': 'Our Message',
    'home.message.content': 'At the heart of our mission is a deep respect for the natural world. Forests are more than just trees—they are home to countless species, vital to the Earth\'s climate system, and essential to the livelihoods of millions of people. Yet every year, we continue to lose them at an alarming rate.',
    'home.message.content2': 'We believe that change starts with awareness. That\'s why this platform exists: to educate, inspire, and empower individuals like you to understand the complex issue of deforestation. From its root causes to its far-reaching effects, our goal is to provide clear, accessible information—and most importantly, to show that everyone can play a role in protecting our planet.',
    'home.message.content3': 'Together, through knowledge and action, we can help preserve forests for future generations.',
    'home.vision.title': 'Our Vision',
    'home.vision.content': 'We envision a world where forests are cherished, protected, and allowed to thrive. A world where communities live in harmony with nature, where economic development no longer comes at the expense of the environment, and where future generations inherit a planet rich in biodiversity and natural beauty.',
    'home.vision.content2': 'Our vision is to create a global movement—one rooted in awareness, education, and collective action. By shedding light on the realities of deforestation and promoting sustainable alternatives, we aim to inspire meaningful change at every level: from individual choices to international policies.',
    'home.vision.content3': 'Together, we can build a future where forests are not only preserved—but restored.',
    'home.mission.title': 'Our Mission',
    'home.mission.content': 'Our mission is to raise awareness, educate, and inspire action against deforestation across the globe. We are dedicated to empowering individuals, communities, and policymakers to recognize the urgency of forest conservation and the role each of us plays in protecting the Earth\'s ecosystems.',
    'home.mission.aims': 'We aim to:',
    'home.mission.aim1': 'Provide accurate, accessible information about deforestation—its causes, impacts, and solutions.',
    'home.mission.aim2': 'Advocate for sustainable land use and responsible environmental policies.',
    'home.mission.aim3': 'Support global efforts in reforestation, conservation, and ecosystem restoration.',
    'home.mission.aim4': 'Encourage mindful choices in daily life, including ethical consumption and reduced environmental footprints.',
    'home.mission.content2': 'We believe that informed individuals can make powerful changes. Through education and action, we strive to build a world where forests are preserved, biodiversity is protected, and future generations can thrive in a healthy environment.',
    'home.mission.join': 'Join Our Mission',
    'home.facts.title': 'Quick Facts',
    'home.facts.forest-coverage': 'of Earth\'s land surface is covered by forests',
    'home.facts.annual-loss': 'hectares of forest lost annually',
    'home.facts.species': 'of terrestrial species live in forests',
    
    // Contact page
    'contact.title': 'Contact Us',
    'contact.intro': 'We\'d love to hear from you! Whether you have a question, want to collaborate, or just want to share your thoughts on deforestation — feel free to reach out. Your voice matters in our mission to protect the world\'s forests.',
    'contact.email': 'Email',
    'contact.get-involved': 'Get Involved',
    'contact.get-involved.desc': 'Join our community of forest protectors and stay updated with the latest news, events, and opportunities to make a difference.',
    'contact.follow': 'Follow Us',
    'contact.form.title': 'Send us a Message',
    'contact.form.name': 'Name *',
    'contact.form.email': 'Email *',
    'contact.form.subject': 'Subject',
    'contact.form.message': 'Message *',
    'contact.form.message.placeholder': 'Tell us how you\'d like to help or what questions you have about deforestation...',
    'contact.form.submit': 'Send Message',
    
    // Language switcher
    'language.en': 'English',
    'language.es': 'Español',
    'language.fr': 'Français',
    'language.switch': 'Switch Language'
  },
  
  es: {
    // Navigation
    'nav.home': 'Inicio',
    'nav.what-is': '¿Qué es la Deforestación?',
    'nav.causes': 'Causas',
    'nav.effects': 'Efectos',
    'nav.solutions': 'Soluciones',
    'nav.help': 'Cómo Puedes Ayudar',
    'nav.contact': 'Contacto',
    
    // Common elements
    'footer.copyright': '© 2025 STDC',
    'footer.instagram': 'Instagram',
    'footer.facebook': 'Facebook',
    'footer.twitter': 'Twitter',
    'skip-link': 'Saltar al contenido principal',
    
    // Homepage
    'home.title': 'Detener la Devastación de Árboles',
    'home.intro': 'Cada año, se pierden millones de hectáreas de bosques, amenazando la biodiversidad, alterando los ecosistemas y acelerando el cambio climático. Este sitio web está aquí para guiarte a través de una comprensión más profunda de la deforestación: qué es, por qué sucede y las consecuencias de gran alcance que tiene en el medio ambiente, la vida silvestre y las comunidades humanas.',
    'home.intro2': 'También descubrirás formas prácticas de involucrarte, crear conciencia y tomar medidas significativas para ayudar a proteger y restaurar los bosques de nuestro planeta para las generaciones futuras.',
    'home.learn-more': 'Aprende Sobre la Deforestación',
    'home.take-action': 'Toma Acción Ahora',
    'home.message.title': 'Nuestro Mensaje',
    'home.message.content': 'En el corazón de nuestra misión hay un profundo respeto por el mundo natural. Los bosques son más que solo árboles: son el hogar de innumerables especies, vitales para el sistema climático de la Tierra y esenciales para el sustento de millones de personas. Sin embargo, cada año seguimos perdiéndolos a un ritmo alarmante.',
    'home.message.content2': 'Creemos que el cambio comienza con la conciencia. Por eso existe esta plataforma: para educar, inspirar y empoderar a individuos como tú para entender el complejo tema de la deforestación. Desde sus causas raíz hasta sus efectos de gran alcance, nuestro objetivo es proporcionar información clara y accesible, y lo más importante, mostrar que todos pueden jugar un papel en proteger nuestro planeta.',
    'home.message.content3': 'Juntos, a través del conocimiento y la acción, podemos ayudar a preservar los bosques para las generaciones futuras.',
    'home.vision.title': 'Nuestra Visión',
    'home.vision.content': 'Visualizamos un mundo donde los bosques son apreciados, protegidos y se les permite prosperar. Un mundo donde las comunidades viven en armonía con la naturaleza, donde el desarrollo económico ya no viene a expensas del medio ambiente, y donde las generaciones futuras heredan un planeta rico en biodiversidad y belleza natural.',
    'home.vision.content2': 'Nuestra visión es crear un movimiento global, uno arraigado en la conciencia, la educación y la acción colectiva. Al arrojar luz sobre las realidades de la deforestación y promover alternativas sostenibles, aspiramos a inspirar cambios significativos en todos los niveles: desde las elecciones individuales hasta las políticas internacionales.',
    'home.vision.content3': 'Juntos, podemos construir un futuro donde los bosques no solo se preserven, sino que se restauren.',
    'home.mission.title': 'Nuestra Misión',
    'home.mission.content': 'Nuestra misión es crear conciencia, educar e inspirar acción contra la deforestación en todo el mundo. Estamos dedicados a empoderar a individuos, comunidades y formuladores de políticas para reconocer la urgencia de la conservación forestal y el papel que cada uno de nosotros juega en proteger los ecosistemas de la Tierra.',
    'home.mission.aims': 'Nos proponemos:',
    'home.mission.aim1': 'Proporcionar información precisa y accesible sobre la deforestación: sus causas, impactos y soluciones.',
    'home.mission.aim2': 'Abogar por el uso sostenible de la tierra y políticas ambientales responsables.',
    'home.mission.aim3': 'Apoyar los esfuerzos globales en reforestación, conservación y restauración de ecosistemas.',
    'home.mission.aim4': 'Fomentar elecciones conscientes en la vida diaria, incluyendo el consumo ético y la reducción de huellas ambientales.',
    'home.mission.content2': 'Creemos que los individuos informados pueden hacer cambios poderosos. A través de la educación y la acción, aspiramos a construir un mundo donde los bosques se preserven, la biodiversidad se proteja y las generaciones futuras puedan prosperar en un ambiente saludable.',
    'home.mission.join': 'Únete a Nuestra Misión',
    'home.facts.title': 'Datos Rápidos',
    'home.facts.forest-coverage': 'de la superficie terrestre de la Tierra está cubierta por bosques',
    'home.facts.annual-loss': 'hectáreas de bosque perdidas anualmente',
    'home.facts.species': 'de las especies terrestres viven en bosques',
    
    // Contact page
    'contact.title': 'Contáctanos',
    'contact.intro': '¡Nos encantaría saber de ti! Ya sea que tengas una pregunta, quieras colaborar o solo quieras compartir tus pensamientos sobre la deforestación, no dudes en contactarnos. Tu voz importa en nuestra misión de proteger los bosques del mundo.',
    'contact.email': 'Correo Electrónico',
    'contact.get-involved': 'Involúcrate',
    'contact.get-involved.desc': 'Únete a nuestra comunidad de protectores forestales y mantente actualizado con las últimas noticias, eventos y oportunidades para hacer una diferencia.',
    'contact.follow': 'Síguenos',
    'contact.form.title': 'Envíanos un Mensaje',
    'contact.form.name': 'Nombre *',
    'contact.form.email': 'Correo Electrónico *',
    'contact.form.subject': 'Asunto',
    'contact.form.message': 'Mensaje *',
    'contact.form.message.placeholder': 'Cuéntanos cómo te gustaría ayudar o qué preguntas tienes sobre la deforestación...',
    'contact.form.submit': 'Enviar Mensaje',
    
    // Language switcher
    'language.en': 'English',
    'language.es': 'Español',
    'language.fr': 'Français',
    'language.switch': 'Cambiar Idioma'
  },
  
  fr: {
    // Navigation
    'nav.home': 'Accueil',
    'nav.what-is': 'Qu\'est-ce que la Déforestation?',
    'nav.causes': 'Causes',
    'nav.effects': 'Effets',
    'nav.solutions': 'Solutions',
    'nav.help': 'Comment Vous Pouvez Aider',
    'nav.contact': 'Contact',
    
    // Common elements
    'footer.copyright': '© 2025 STDC',
    'footer.instagram': 'Instagram',
    'footer.facebook': 'Facebook',
    'footer.twitter': 'Twitter',
    'skip-link': 'Passer au contenu principal',
    
    // Homepage
    'home.title': 'Arrêter la Dévastation des Arbres',
    'home.intro': 'Chaque année, des millions d\'hectares de forêts sont perdus, menaçant la biodiversité, perturbant les écosystèmes et accélérant le changement climatique. Ce site web est là pour vous guider à travers une compréhension plus profonde de la déforestation - ce qu\'elle est, pourquoi elle se produit et les conséquences de grande portée qu\'elle a sur l\'environnement, la faune et les communautés humaines.',
    'home.intro2': 'Vous découvrirez également des moyens pratiques de vous impliquer, de sensibiliser et de prendre des mesures significatives pour aider à protéger et restaurer les forêts de notre planète pour les générations futures.',
    'home.learn-more': 'En Savoir Plus sur la Déforestation',
    'home.take-action': 'Agir Maintenant',
    'home.message.title': 'Notre Message',
    'home.message.content': 'Au cœur de notre mission se trouve un profond respect pour le monde naturel. Les forêts sont plus que de simples arbres - elles sont le foyer d\'innombrables espèces, vitales pour le système climatique de la Terre et essentielles aux moyens de subsistance de millions de personnes. Pourtant, chaque année, nous continuons à les perdre à un rythme alarmant.',
    'home.message.content2': 'Nous croyons que le changement commence par la prise de conscience. C\'est pourquoi cette plateforme existe : pour éduquer, inspirer et autonomiser des individus comme vous pour comprendre le problème complexe de la déforestation. De ses causes profondes à ses effets de grande portée, notre objectif est de fournir des informations claires et accessibles - et surtout, de montrer que chacun peut jouer un rôle dans la protection de notre planète.',
    'home.message.content3': 'Ensemble, grâce à la connaissance et à l\'action, nous pouvons aider à préserver les forêts pour les générations futures.',
    'home.vision.title': 'Notre Vision',
    'home.vision.content': 'Nous envisageons un monde où les forêts sont chéries, protégées et autorisées à prospérer. Un monde où les communautés vivent en harmonie avec la nature, où le développement économique ne se fait plus aux dépens de l\'environnement, et où les générations futures héritent d\'une planète riche en biodiversité et en beauté naturelle.',
    'home.vision.content2': 'Notre vision est de créer un mouvement mondial - ancré dans la prise de conscience, l\'éducation et l\'action collective. En éclairant les réalités de la déforestation et en promouvant des alternatives durables, nous visons à inspirer des changements significatifs à tous les niveaux : des choix individuels aux politiques internationales.',
    'home.vision.content3': 'Ensemble, nous pouvons construire un avenir où les forêts ne sont pas seulement préservées - mais restaurées.',
    'home.mission.title': 'Notre Mission',
    'home.mission.content': 'Notre mission est de sensibiliser, éduquer et inspirer l\'action contre la déforestation dans le monde entier. Nous nous consacrons à autonomiser les individus, les communautés et les décideurs pour reconnaître l\'urgence de la conservation forestière et le rôle que chacun d\'entre nous joue dans la protection des écosystèmes de la Terre.',
    'home.mission.aims': 'Nous visons à :',
    'home.mission.aim1': 'Fournir des informations précises et accessibles sur la déforestation - ses causes, impacts et solutions.',
    'home.mission.aim2': 'Plaider pour l\'utilisation durable des terres et des politiques environnementales responsables.',
    'home.mission.aim3': 'Soutenir les efforts mondiaux de reboisement, de conservation et de restauration des écosystèmes.',
    'home.mission.aim4': 'Encourager des choix conscients dans la vie quotidienne, y compris la consommation éthique et la réduction des empreintes environnementales.',
    'home.mission.content2': 'Nous croyons que les individus informés peuvent apporter des changements puissants. Par l\'éducation et l\'action, nous nous efforçons de construire un monde où les forêts sont préservées, la biodiversité protégée et les générations futures peuvent prospérer dans un environnement sain.',
    'home.mission.join': 'Rejoignez Notre Mission',
    'home.facts.title': 'Faits Rapides',
    'home.facts.forest-coverage': 'de la surface terrestre de la Terre est couverte de forêts',
    'home.facts.annual-loss': 'hectares de forêt perdus annuellement',
    'home.facts.species': 'des espèces terrestres vivent dans les forêts',
    
    // Contact page
    'contact.title': 'Contactez-nous',
    'contact.intro': 'Nous aimerions avoir de vos nouvelles ! Que vous ayez une question, que vous souhaitiez collaborer ou que vous vouliez simplement partager vos réflexions sur la déforestation - n\'hésitez pas à nous contacter. Votre voix compte dans notre mission de protéger les forêts du monde.',
    'contact.email': 'Email',
    'contact.get-involved': 'S\'impliquer',
    'contact.get-involved.desc': 'Rejoignez notre communauté de protecteurs forestiers et restez informé des dernières nouvelles, événements et opportunités de faire une différence.',
    'contact.follow': 'Suivez-nous',
    'contact.form.title': 'Envoyez-nous un Message',
    'contact.form.name': 'Nom *',
    'contact.form.email': 'Email *',
    'contact.form.subject': 'Sujet',
    'contact.form.message': 'Message *',
    'contact.form.message.placeholder': 'Dites-nous comment vous aimeriez aider ou quelles questions vous avez sur la déforestation...',
    'contact.form.submit': 'Envoyer le Message',
    
    // Language switcher
    'language.en': 'English',
    'language.es': 'Español',
    'language.fr': 'Français',
    'language.switch': 'Changer de Langue'
  }
};

// Current language (default to English)
let currentLanguage = 'en';

// Initialize i18n system
function initI18n() {
  console.log('STDC i18n: Initializing...');
  
  // Check for saved language preference
  const savedLanguage = localStorage.getItem('stdc-language');
  if (savedLanguage && translations[savedLanguage]) {
    currentLanguage = savedLanguage;
    console.log('STDC i18n: Using saved language:', currentLanguage);
  } else {
    // Try to detect browser language
    const browserLang = navigator.language.split('-')[0];
    if (translations[browserLang]) {
      currentLanguage = browserLang;
      console.log('STDC i18n: Using browser language:', currentLanguage);
    } else {
      console.log('STDC i18n: Using default language: en');
    }
  }
  
  // Apply translations
  applyTranslations();
  
  // Create language switcher
  createLanguageSwitcher();
  
  console.log('STDC i18n: Initialization complete!');
}

// Apply translations to the current page
function applyTranslations() {
  const elements = document.querySelectorAll('[data-i18n]');
  elements.forEach(element => {
    const key = element.getAttribute('data-i18n');
    const translation = getTranslation(key);
    if (translation) {
      if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
        if (element.hasAttribute('placeholder')) {
          element.placeholder = translation;
        } else {
          element.value = translation;
        }
      } else {
        element.textContent = translation;
      }
    }
  });
}

// Get translation for a key
function getTranslation(key) {
  return translations[currentLanguage]?.[key] || translations['en'][key] || key;
}

// Change language
function changeLanguage(lang) {
  if (translations[lang]) {
    currentLanguage = lang;
    localStorage.setItem('stdc-language', lang);
    applyTranslations();
    updateLanguageSwitcher();
  }
}

// Create language switcher component
function createLanguageSwitcher() {
  console.log('STDC i18n: Creating language switcher...');
  
  const header = document.querySelector('header');
  if (!header) {
    console.error('STDC i18n: Header not found!');
    return;
  }
  
  console.log('STDC i18n: Header found, creating switcher...');
  
  // Remove any existing language switcher
  const existingSwitcher = header.querySelector('.language-switcher');
  if (existingSwitcher) {
    existingSwitcher.remove();
  }
  
  const languageSwitcher = document.createElement('div');
  languageSwitcher.className = 'language-switcher';
  languageSwitcher.innerHTML = `
    <button class="language-btn" aria-label="${getTranslation('language.switch')}">
      <span class="current-lang">${getLanguageName(currentLanguage)}</span>
      <span class="dropdown-arrow">▼</span>
    </button>
    <ul class="language-dropdown">
      <li><button onclick="changeLanguage('en')" class="${currentLanguage === 'en' ? 'active' : ''}">${getTranslation('language.en')}</button></li>
      <li><button onclick="changeLanguage('es')" class="${currentLanguage === 'es' ? 'active' : ''}">${getTranslation('language.es')}</button></li>
      <li><button onclick="changeLanguage('fr')" class="${currentLanguage === 'fr' ? 'active' : ''}">${getTranslation('language.fr')}</button></li>
    </ul>
  `;
  
  header.appendChild(languageSwitcher);
  console.log('STDC i18n: Language switcher added to header');
  
  // Add event listeners
  const langBtn = languageSwitcher.querySelector('.language-btn');
  const dropdown = languageSwitcher.querySelector('.language-dropdown');
  
  langBtn.addEventListener('click', () => {
    dropdown.classList.toggle('show');
    console.log('STDC i18n: Language dropdown toggled');
  });
  
  // Close dropdown when clicking outside
  document.addEventListener('click', (e) => {
    if (!languageSwitcher.contains(e.target)) {
      dropdown.classList.remove('show');
    }
  });
  
  console.log('STDC i18n: Language switcher created successfully!');
}

// Update language switcher display
function updateLanguageSwitcher() {
  const currentLangSpan = document.querySelector('.current-lang');
  if (currentLangSpan) {
    currentLangSpan.textContent = getLanguageName(currentLanguage);
  }
  
  // Update active state in dropdown
  const langButtons = document.querySelectorAll('.language-dropdown button');
  langButtons.forEach(btn => {
    btn.classList.remove('active');
    if (btn.onclick.toString().includes(`'${currentLanguage}'`)) {
      btn.classList.add('active');
    }
  });
}

// Get language name for display
function getLanguageName(code) {
  const names = {
    'en': 'EN',
    'es': 'ES',
    'fr': 'FR'
  };
  return names[code] || code.toUpperCase();
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', initI18n);

// Also try to initialize immediately if DOM is already loaded
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initI18n);
} else {
  // DOM is already loaded
  initI18n();
}

console.log('STDC i18n: Script loaded, readyState:', document.readyState);

// Export functions for global use
window.changeLanguage = changeLanguage;
window.getTranslation = getTranslation; 